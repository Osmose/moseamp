<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no">

    <title>Moseamp</title>

    <link rel="stylesheet" type="text/css" href="css/reset.css">
    <link rel="stylesheet" type="text/css" href="css/font-awesome.css">
  </head>
  <body>
    <main id="app"></main>

    <script>
      var fs = require('fs');
      var myth = require('myth')
      var path = require('path');

      require("babel/register")({
        only: /.es6$/,
        modules: 'common',
        optional: [
          'es7.asyncFunctions',
        ],
        ignore: [
          /lib\/.*\.js$/
        ]
      });

      // Support loading CSS files via require.
      require.extensions['.css'] = function(module, filename) {
        var styleNode = document.createElement('style');
        styleNode.textContent = myth(fs.readFileSync(filename, 'utf8'));
        document.head.appendChild(styleNode);
      }
      require('./css/styles.css');

      // Add src/browser to global paths so that we can import moseamp things
      // with paths like 'moseamp/audio'.
      require('module').globalPaths.push(path.resolve(__dirname, '../src/browser'));

      // Start function to bootstrap the audio player.
      require('moseamp').start();
    </script>
  </body>
</html>
